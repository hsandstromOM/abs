var deepExtend = require('deep-extend');
var getPrototypeOf = Object.getPrototypeOf;
var ObjectProto = Object.prototype;

function getPrototypes(object) {
    var proto = getPrototypeOf(object);
    var protos = [];

    while (proto !== null && proto !== ObjectProto) {
        protos.push(proto);
        proto = getPrototypeOf(proto);
    }

    return protos;
}

function flattenPrototypes(object) {
    var objects = [object].concat(getPrototypes(object)).reverse();

    return deepExtend.apply(null, objects);
}

module.exports = flattenPrototypes;
